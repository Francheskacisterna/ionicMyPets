"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6497],{6497:(J,P,a)=>{a.r(P),a.d(P,{MY_DATE_FORMATS:()=>j,RegistroPageModule:()=>q});var k=a(177),n=a(9417),d=a(4742),R=a(9192),E=a(467),T=a(4843),w=a(6598),e=a(4438),_=a(2872),L=a(9626),f=a(5596),p=a(882),x=a(9631),y=a(8834),M=a(7250),h=a(6600),v=a(5084);function S(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," El nombre completo es obligatorio. "),e.k0s())}function D(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," El nombre completo debe tener al menos 6 caracteres. "),e.k0s())}function A(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," El correo electr\xf3nico es obligatorio. "),e.k0s())}function G(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Ingresa un correo electr\xf3nico v\xe1lido. "),e.k0s())}function O(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," La contrase\xf1a es obligatoria. "),e.k0s())}function $(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," La contrase\xf1a debe tener al menos 8 caracteres, incluyendo un n\xfamero y una letra. "),e.k0s())}function U(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," La confirmaci\xf3n de contrase\xf1a es obligatoria. "),e.k0s())}function V(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Las contrase\xf1as no coinciden. "),e.k0s())}function z(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," La fecha de nacimiento es obligatoria. "),e.k0s())}function B(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Debes ser mayor de 18 a\xf1os. "),e.k0s())}function H(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1," El sexo es obligatorio. "),e.k0s())}const X=[{path:"",component:(()=>{var r;class i{constructor(t,o,s,l,m){this.navCtrl=t,this.alertCtrl=o,this.animationCtrl=s,this.userService=l,this.formBuilder=m,this.registerForm=this.formBuilder.group({fullName:["",[n.k0.required,n.k0.minLength(6)]],email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(6)]],confirmPassword:["",n.k0.required],fechaNacimiento:["",[n.k0.required,this.ageValidator]],sexo:["",n.k0.required]})}ngAfterViewInit(){this.animateFormEntrance()}ageValidator(t){const o=new Date(t.value),s=new Date,l=s.getFullYear()-o.getFullYear(),m=s.getMonth()-o.getMonth();return m<0||0===m&&s.getDate()<o.getDate()?{ageInvalid:!0}:l>=18?null:{ageInvalid:!0}}registerUser(){var t=this;return(0,E.A)(function*(){if(t.registerForm.valid){const o=t.registerForm.value.fullName,s=t.registerForm.value.password,l=t.registerForm.value.email,m=t.registerForm.value.fechaNacimiento,b=t.registerForm.value.sexo;if(s!==t.registerForm.value.confirmPassword)return void(yield t.showAlert("Error","Las contrase\xf1as no coinciden."));const c={nombre:o,contrasena:s,correo:l,fechaNacimiento:m,sexo:b,rol:"usuario",synced:0};try{if(yield t.userService.addUsuarioSQLite(c),console.log("Usuario a\xf1adido en SQLite."),(yield w.l.getStatus()).connected)try{const g=yield(0,T._)(t.userService.addUsuarioAPI(c));g&&g.id?(c.id=g.id.toString(),c.synced=1,yield t.userService.updateUsuarioSQLite(c),console.log("Usuario sincronizado con la API y actualizado en SQLite.")):console.log("No se recibi\xf3 un ID v\xe1lido de la API.")}catch(g){console.error("Error al sincronizar con la API, usuario seguir\xe1 solo en SQLite:",g)}else console.log("No hay conexi\xf3n a la API, el usuario se guardar\xe1 solo en SQLite.");t.showSuccessPopup(),t.navigateToLogin(),t.resetForm()}catch(F){console.error("Error al registrar el usuario:",F),yield t.showAlert("Error","Hubo un problema al registrar el usuario.")}}else yield t.showAlert("Formulario inv\xe1lido","Por favor, completa todos los campos correctamente.")})()}resetForm(){this.registerForm.reset({fullName:"",email:"",password:"",confirmPassword:"",fechaNacimiento:"",sexo:""})}navigateToLogin(){this.navCtrl.navigateForward("/login")}navigateToHome(){this.navCtrl.navigateForward("/home")}showSuccessPopup(){var t=this;return(0,E.A)(function*(){yield(yield t.alertCtrl.create({header:"Registro Exitoso",message:"\xa1Te has registrado correctamente!",buttons:["OK"]})).present()})()}showAlert(t,o){var s=this;return(0,E.A)(function*(){yield(yield s.alertCtrl.create({header:t,message:o,buttons:["OK"]})).present()})()}animateFormEntrance(){const t=document.querySelector(".login-card");t&&this.animationCtrl.create().addElement(t).duration(500).easing("ease-out").fromTo("transform","translateY(100%)","translateY(0%)").fromTo("opacity",0,1).play()}}return(r=i).\u0275fac=function(t){return new(t||r)(e.rXU(_.q9),e.rXU(d.hG),e.rXU(d.Hx),e.rXU(L.D),e.rXU(n.ok))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-registro"]],decls:64,vars:15,consts:[["picker",""],["fullscreen","",1,"login-content"],[1,"background-container"],["src","assets/images/fondo1.jpeg","alt","Fondo",1,"background-image"],[1,"content-overlay"],["src","assets/images/logo_pawsy.png","alt","Logo Pawsy",1,"logo"],[1,"login-card"],[1,"center-title"],[3,"ngSubmit","formGroup"],["appearance","fill",1,"input-item"],["matInput","","formControlName","fullName","type","text","required",""],[4,"ngIf"],["matInput","","formControlName","email","type","email","required",""],["matInput","","formControlName","password","type","password","required",""],["matInput","","formControlName","confirmPassword","type","password","required",""],["matInput","","formControlName","fechaNacimiento","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["formControlName","sexo","required",""],["value","Hombre"],["value","Mujer"],["value","No Binario"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],[1,"register-link"],["href","#",3,"click"],[3,"click"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"ion-content",1)(1,"div",2),e.nrm(2,"img",3),e.k0s(),e.j41(3,"div",4),e.nrm(4,"img",5),e.j41(5,"mat-card",6)(6,"mat-card-header")(7,"mat-card-title",7),e.EFF(8,"Crear Cuenta"),e.k0s()(),e.j41(9,"mat-card-content")(10,"form",8),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(o.registerUser())}),e.j41(11,"mat-form-field",9)(12,"mat-label"),e.EFF(13,"Nombre completo"),e.k0s(),e.nrm(14,"input",10),e.DNE(15,S,2,0,"mat-error",11)(16,D,2,0,"mat-error",11),e.k0s(),e.j41(17,"mat-form-field",9)(18,"mat-label"),e.EFF(19,"Correo Electr\xf3nico"),e.k0s(),e.nrm(20,"input",12),e.DNE(21,A,2,0,"mat-error",11)(22,G,2,0,"mat-error",11),e.k0s(),e.j41(23,"mat-form-field",9)(24,"mat-label"),e.EFF(25,"Contrase\xf1a"),e.k0s(),e.nrm(26,"input",13),e.DNE(27,O,2,0,"mat-error",11)(28,$,2,0,"mat-error",11),e.k0s(),e.j41(29,"mat-form-field",9)(30,"mat-label"),e.EFF(31,"Confirmar Contrase\xf1a"),e.k0s(),e.nrm(32,"input",14),e.DNE(33,U,2,0,"mat-error",11)(34,V,2,0,"mat-error",11),e.k0s(),e.j41(35,"mat-form-field",9)(36,"mat-label"),e.EFF(37,"Fecha de Nacimiento"),e.k0s(),e.nrm(38,"input",15)(39,"mat-datepicker-toggle",16)(40,"mat-datepicker",null,0),e.DNE(42,z,2,0,"mat-error",11)(43,B,2,0,"mat-error",11),e.k0s(),e.j41(44,"mat-form-field",9)(45,"mat-label"),e.EFF(46,"Sexo"),e.k0s(),e.j41(47,"mat-select",17)(48,"mat-option",18),e.EFF(49,"Hombre"),e.k0s(),e.j41(50,"mat-option",19),e.EFF(51,"Mujer"),e.k0s(),e.j41(52,"mat-option",20),e.EFF(53,"No Binario"),e.k0s()(),e.DNE(54,H,2,0,"mat-error",11),e.k0s(),e.j41(55,"button",21),e.EFF(56," Registrarse "),e.k0s(),e.j41(57,"div",22)(58,"p"),e.EFF(59,"\xbfYa tienes una cuenta? "),e.j41(60,"a",23),e.bIt("click",function(){return e.eBV(s),e.Njj(o.navigateToLogin())}),e.EFF(61,"Inicia sesi\xf3n aqu\xed"),e.k0s()()(),e.j41(62,"ion-item",24),e.bIt("click",function(){return e.eBV(s),e.Njj(o.navigateToHome())}),e.EFF(63,"Ir al Home"),e.k0s()()()()()()}if(2&t){let s,l,m,b,c,F,g,C,N,Y;const I=e.sdS(41);e.R7$(10),e.Y8G("formGroup",o.registerForm),e.R7$(5),e.Y8G("ngIf",null==(s=o.registerForm.get("fullName"))?null:s.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(l=o.registerForm.get("fullName"))?null:l.hasError("minlength")),e.R7$(5),e.Y8G("ngIf",null==(m=o.registerForm.get("email"))?null:m.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(b=o.registerForm.get("email"))?null:b.hasError("email")),e.R7$(5),e.Y8G("ngIf",null==(c=o.registerForm.get("password"))?null:c.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(F=o.registerForm.get("password"))?null:F.hasError("pattern")),e.R7$(5),e.Y8G("ngIf",null==(g=o.registerForm.get("confirmPassword"))?null:g.hasError("required")),e.R7$(),e.Y8G("ngIf",o.registerForm.hasError("passwordMismatch")),e.R7$(4),e.Y8G("matDatepicker",I),e.R7$(),e.Y8G("for",I),e.R7$(3),e.Y8G("ngIf",null==(C=o.registerForm.get("fechaNacimiento"))?null:C.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(N=o.registerForm.get("fechaNacimiento"))?null:N.hasError("ageInvalid")),e.R7$(11),e.Y8G("ngIf",null==(Y=o.registerForm.get("sexo"))?null:Y.hasError("required")),e.R7$(),e.Y8G("disabled",!o.registerForm.valid)}},dependencies:[k.bT,n.qT,n.me,n.BC,n.cb,n.YS,n.j4,n.JD,d.W9,d.uz,f.RN,f.m2,f.MM,f.dh,p.rl,p.nJ,p.TL,p.yw,x.fg,y.$z,M.VO,h.wT,v.Vh,v.bZ,v.bU],styles:['@charset "UTF-8";.login-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;position:relative;padding:20px}.background-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.background-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:brightness(.5)}.content-overlay[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7e9ff,#d4c7ed);padding:20px;border-radius:20px;box-shadow:0 8px 30px #0003;max-width:400px;width:100%;text-align:center}.logo[_ngcontent-%COMP%]{width:100px;margin:0 auto 15px;display:block}.login-card[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:20px;padding:20px;box-shadow:0 4px 15px #0000001a}.center-title[_ngcontent-%COMP%]{font-size:1.3rem;color:indigo;text-align:center;font-weight:700;margin-bottom:14px}.input-item[_ngcontent-%COMP%]{margin-bottom:15px;width:100%;--background: #ffffff;--placeholder-color: #888;--color: #4a4a4a;--border-radius: 10px;border:1px solid #c1c1c1;background:#ffffffb3;box-shadow:inset 0 2px 4px #0000000d}.login-button[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:25px;background:#6c757d;color:#fff;font-size:1.1rem;letter-spacing:1px;box-shadow:0 4px 10px #0000004d;margin-top:20px;text-transform:uppercase;transition:background .2s ease-in-out}.login-button[_ngcontent-%COMP%]:hover{background:#5a6268}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:15px;font-size:.9rem;color:#4a4a4a}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6b4ed8;text-decoration:none;font-weight:700}.go-home-link[_ngcontent-%COMP%]{text-align:center;font-size:1rem;color:indigo;margin-top:15px;text-decoration:underline;cursor:pointer}']}),i})()}];let Q=(()=>{var r;class i{}return(r=i).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[R.iI.forChild(X),R.iI]}),i})();const j={parse:{dateInput:"LL"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let q=(()=>{var r;class i{}return(r=i).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({providers:[{provide:h.Ju,useValue:"es-ES"},{provide:h.de,useValue:j}],imports:[k.MD,n.YN,n.X1,d.bv,Q,f.Hu,p.RG,x.fS,y.Hl,M.Ve,v.X6,h.WX]}),i})()}}]);