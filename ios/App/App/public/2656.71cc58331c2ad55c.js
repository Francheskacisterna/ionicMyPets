"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2656],{2656:(k,g,d)=>{d.r(g),d.d(g,{AvePageModule:()=>O});var l=d(177),h=d(9417),r=d(4742),u=d(9192),p=d(467),e=d(4438),v=d(636),f=d(224);function m(i,c){if(1&i){const n=e.RV6();e.j41(0,"div",17),e.bIt("click",function(){const o=e.eBV(n).$implicit,s=e.XpG(2).$implicit,a=e.XpG();return e.Njj(a.selectWeight(s,o))}),e.EFF(1),e.k0s()}if(2&i){const n=c.$implicit,t=e.XpG(2).$implicit,o=e.XpG();e.AVh("selected",o.isSelected(t,n)),e.R7$(),e.SpI(" ",n.size," kg ")}}function P(i,c){if(1&i&&(e.j41(0,"div",15),e.DNE(1,m,2,3,"div",16),e.k0s()),2&i){const n=e.XpG().$implicit,t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.weightOptionsMap[n.id])}}function _(i,c){if(1&i&&(e.j41(0,"div")(1,"p",18)(2,"strong"),e.EFF(3,"Precio:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p",19)(6,"strong"),e.EFF(7,"Stock:"),e.k0s(),e.EFF(8),e.k0s()()),2&i){const n=e.XpG().$implicit;e.R7$(4),e.SpI(" $",n.selectedWeight.price,""),e.R7$(4),e.SpI(" ",n.selectedWeight.stock,"")}}function F(i,c){if(1&i){const n=e.RV6();e.j41(0,"ion-col",8)(1,"ion-card"),e.nrm(2,"ion-img",9),e.j41(3,"ion-card-header")(4,"ion-card-title",10),e.EFF(5),e.k0s()(),e.j41(6,"ion-card-content")(7,"p",11),e.EFF(8),e.k0s(),e.DNE(9,P,2,1,"div",12)(10,_,9,2,"div",13),e.j41(11,"ion-button",14),e.bIt("click",function(){const o=e.eBV(n).$implicit,s=e.XpG();return e.Njj(s.addToCart(o))}),e.EFF(12," Agregar al carrito "),e.k0s()()()()}if(2&i){const n=c.$implicit,t=e.XpG();e.R7$(2),e.Y8G("src",n.imagen||"assets/default-image.jpg"),e.R7$(3),e.JRh(n.nombre),e.R7$(3),e.JRh(n.descripcion),e.R7$(),e.Y8G("ngIf",n.id&&t.weightOptionsMap[n.id]),e.R7$(),e.Y8G("ngIf",n.selectedWeight)}}const A=[{path:"",component:(()=>{var i;class c{constructor(t,o){this.productService=t,this.cartService=o,this.products=[],this.filteredProducts=[],this.weightOptionsMap={}}ngOnInit(){this.productService.products$.subscribe(t=>{this.products=t,this.filteredProducts=[...this.products],this.loadWeightOptionsForProducts()})}ionViewWillEnter(){this.productService.loadProductsByCategory("aves")}loadWeightOptionsForProducts(){var t=this;return(0,p.A)(function*(){for(const o of t.products)yield t.loadWeightOptions(o)})()}loadWeightOptions(t){var o=this;return(0,p.A)(function*(){if(t.id){let a=[];if(yield o.productService.isApiAvailable())try{a=(yield o.productService.getWeightOptionsByProductIdAPI(t.id).toPromise())||[]}catch(y){console.error("Error al obtener opciones de peso desde la API:",y)}a.length||(a=(yield o.productService.getWeightOptionsByProductIdSQLite(t.id))||[]),o.weightOptionsMap[t.id]=a}})()}sortProducts(t){const o=t.detail.value;"price-asc"===o?this.filteredProducts.sort((s,a)=>s.precio-a.precio):"price-desc"===o&&this.filteredProducts.sort((s,a)=>a.precio-s.precio)}selectWeight(t,o){t.selectedWeight=o}isSelected(t,o){return t.selectedWeight===o}addToCart(t){var o=this;return(0,p.A)(function*(){if(t.selectedWeight)try{yield o.cartService.addToCart(t,1,t.selectedWeight)}catch(s){console.error("Error al agregar producto al carrito:",s)}else console.log("Selecciona un peso antes de agregar al carrito.")})()}}return(i=c).\u0275fac=function(t){return new(t||i)(e.rXU(v.b),e.rXU(f.m))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-ave"]],decls:15,vars:1,consts:[["color","primary"],[1,"custom-title"],[1,"ion-padding","custom-content"],["size","6"],["placeholder","Ordenar por",3,"ionChange"],["value","price-asc"],["value","price-desc"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","4"],[1,"product-image",3,"src"],[1,"product-title"],[1,"product-description"],["class","weight-options",4,"ngIf"],[4,"ngIf"],["expand","block","fill","outline","color","secondary",1,"add-to-cart-button",3,"click"],[1,"weight-options"],["class","weight-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"weight-item",3,"click"],[1,"selected-price"],[1,"stock-info"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),e.EFF(3,"Pawsy - Aves"),e.k0s()()(),e.j41(4,"ion-content",2)(5,"ion-row")(6,"ion-col",3)(7,"ion-select",4),e.bIt("ionChange",function(a){return o.sortProducts(a)}),e.j41(8,"ion-select-option",5),e.EFF(9,"Precio: Menor a Mayor"),e.k0s(),e.j41(10,"ion-select-option",6),e.EFF(11,"Precio: Mayor a Menor"),e.k0s()()()(),e.j41(12,"ion-grid")(13,"ion-row"),e.DNE(14,F,13,5,"ion-col",7),e.k0s()()()),2&t&&(e.R7$(14),e.Y8G("ngForOf",o.filteredProducts))},dependencies:[l.Sq,l.bT,r.Jm,r.b_,r.I9,r.ME,r.tN,r.hU,r.W9,r.lO,r.eU,r.KW,r.ln,r.Nm,r.Ip,r.BC,r.ai,r.Je],styles:['@charset "UTF-8";.custom-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700}.product-image[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px}.product-title[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;margin-top:8px}.product-description[_ngcontent-%COMP%]{font-size:.9em;color:#666;margin-top:4px}.weight-options[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:10px;justify-content:center}.weight-item[_ngcontent-%COMP%]{background-color:#f0f0f0;border-radius:4px;padding:4px 8px;text-align:center;font-size:.8em;cursor:pointer;transition:background-color .3s ease;min-width:40px}.weight-item.selected[_ngcontent-%COMP%]{background-color:#d1c4e9;color:#000;font-weight:700}.selected-price[_ngcontent-%COMP%]{font-size:1em;color:#555;font-weight:600;margin-top:8px;text-align:center}.add-to-cart-button[_ngcontent-%COMP%]{margin-top:12px;font-weight:700;border-radius:6px}']}),c})()}];let M=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.iI.forChild(A),u.iI]}),c})(),O=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[l.MD,h.YN,r.bv,M]}),c})()}}]);