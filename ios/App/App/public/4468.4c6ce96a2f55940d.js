"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4468],{4468:(x,u,a)=>{a.r(u),a.d(u,{ProductDetailPageModule:()=>v});var d=a(177),P=a(9417),r=a(4742),l=a(9192),g=a(467),t=a(4438),h=a(636);function f(e,c){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"currency"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s()()),2&e){const n=c.$implicit;t.R7$(2),t.SpI("",n.size," kg"),t.R7$(2),t.JRh(t.brH(5,3,n.price,"CLP","symbol")),t.R7$(3),t.JRh(n.stock)}}function m(e,c){if(1&e&&(t.j41(0,"ion-card",14)(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"Opciones de Peso"),t.k0s()(),t.j41(4,"ion-card-content")(5,"table",15)(6,"thead")(7,"tr")(8,"th"),t.EFF(9,"Peso"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Precio"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Stock"),t.k0s()()(),t.j41(14,"tbody"),t.DNE(15,f,8,7,"tr",16),t.k0s()()()()),2&e){const n=t.XpG(2);t.R7$(15),t.Y8G("ngForOf",n.weightOptions)}}function F(e,c){if(1&e){const n=t.RV6();t.j41(0,"ion-content")(1,"ion-card",5),t.nrm(2,"ion-img",6),t.j41(3,"ion-card-header")(4,"ion-card-title",7),t.EFF(5),t.k0s(),t.j41(6,"p",8),t.EFF(7),t.k0s(),t.j41(8,"p",9),t.EFF(9),t.nI1(10,"currency"),t.k0s(),t.j41(11,"p",10),t.EFF(12),t.k0s(),t.j41(13,"p",11),t.EFF(14,"Categor\xeda: "),t.j41(15,"strong"),t.EFF(16),t.k0s()()()(),t.DNE(17,m,16,1,"ion-card",12),t.j41(18,"ion-button",13),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.goBackToList())}),t.EFF(19," Volver a Lista de Productos "),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(2),t.Y8G("src",n.product.imagen?n.product.imagen:"assets/logo_pawsy.png"),t.R7$(3),t.JRh(n.product.nombre),t.R7$(2),t.JRh(n.product.descripcion),t.R7$(2),t.SpI("Precio base: ",t.brH(10,7,n.product.precio,"CLP","symbol"),""),t.R7$(3),t.SpI("Stock total: ",n.product.stock,""),t.R7$(4),t.JRh(n.product.categoria),t.R7$(),t.Y8G("ngIf",n.weightOptions.length>0)}}const b=[{path:"",component:(()=>{var e;class c{constructor(o,i){this.router=o,this.productService=i,this.weightOptions=[]}ngOnInit(){var o;const i=this.router.getCurrentNavigation();null!=i&&null!==(o=i.extras)&&void 0!==o&&null!==(o=o.state)&&void 0!==o&&o.product?(this.product=i.extras.state.product,this.loadWeightOptions()):console.error("No se encontraron datos del producto en el estado de navegaci\xf3n")}loadWeightOptions(){var o=this;return(0,g.A)(function*(){var i;if(null!==(i=o.product)&&void 0!==i&&i.id)if(yield o.productService.isApiAvailable())try{const p=yield o.productService.getWeightOptionsByProductIdAPI(o.product.id).toPromise();o.weightOptions=p||[],console.log("Opciones de peso obtenidas de la API:",o.weightOptions)}catch(p){console.error("Error al obtener opciones de peso desde la API:",p),yield o.loadWeightOptionsFromSQLite()}else yield o.loadWeightOptionsFromSQLite()})()}loadWeightOptionsFromSQLite(){var o=this;return(0,g.A)(function*(){var i;if(null!==(i=o.product)&&void 0!==i&&i.id)try{const s=yield o.productService.getWeightOptionsByProductIdSQLite(o.product.id);o.weightOptions=s||[],console.log("Opciones de peso obtenidas de SQLite:",o.weightOptions)}catch(s){console.error("Error al obtener opciones de peso desde SQLite:",s)}})()}goBackToList(){this.router.navigate(["/productos/product-list"])}}return(e=c).\u0275fac=function(o){return new(o||e)(t.rXU(l.Ix),t.rXU(h.b))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-product-detail"]],decls:11,vars:1,consts:[["color","primary"],["slot","start"],["defaultHref","/productos"],[4,"ngIf"],[1,"footer-title"],[1,"product-card"],[1,"product-image",3,"src"],[1,"product-name"],[1,"product-description"],[1,"product-price"],[1,"product-stock"],[1,"product-category"],["class","weight-options-card",4,"ngIf"],["expand","full","color","secondary",1,"back-button",3,"click"],[1,"weight-options-card"],[1,"weight-options-table"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Detalles del Producto"),t.k0s()()(),t.DNE(6,F,20,11,"ion-content",3),t.j41(7,"ion-footer")(8,"ion-toolbar")(9,"ion-title",4),t.EFF(10,"Detalles del Producto"),t.k0s()()()),2&o&&(t.R7$(6),t.Y8G("ngIf",i.product))},dependencies:[d.Sq,d.bT,r.Jm,r.QW,r.b_,r.I9,r.ME,r.tN,r.W9,r.M0,r.eU,r.KW,r.BC,r.ai,r.el,d.oe],styles:[".product-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px;box-shadow:0 4px 6px #0000001a}.product-image[_ngcontent-%COMP%]{width:100%;border-top-left-radius:12px;border-top-right-radius:12px}.product-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:4px}.product-description[_ngcontent-%COMP%]{font-size:16px;color:#666;margin-bottom:8px}.product-price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#4caf50}.product-stock[_ngcontent-%COMP%], .product-category[_ngcontent-%COMP%]{font-size:16px;color:#666}.weight-options-card[_ngcontent-%COMP%]{margin:16px;border-radius:12px}.weight-options-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.weight-options-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .weight-options-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid #ddd}.weight-options-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;color:#333}.footer-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;text-align:center}"]}),c})()}];let O=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[l.iI.forChild(b),l.iI]}),c})(),v=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[d.MD,P.YN,r.bv,O]}),c})()}}]);