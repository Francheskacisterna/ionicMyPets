"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4451],{4451:(Y,E,c)=>{c.r(E),c.d(E,{UserEditPageModule:()=>I});var v=c(177),i=c(9417),n=c(4742),f=c(9192),p=c(467),e=c(4438),h=c(9626);function k(o,a){1&o&&(e.j41(0,"ion-text",17),e.EFF(1," El nombre debe tener al menos 6 caracteres. "),e.k0s())}function U(o,a){1&o&&(e.j41(0,"ion-text",17),e.EFF(1," Correo electr\xf3nico inv\xe1lido. "),e.k0s())}function b(o,a){1&o&&(e.j41(0,"ion-text",17),e.EFF(1," La contrase\xf1a es requerida y debe tener al menos 6 caracteres. "),e.k0s())}function j(o,a){1&o&&(e.j41(0,"ion-text",17),e.EFF(1," La fecha de nacimiento es requerida. "),e.k0s())}function C(o,a){1&o&&(e.j41(0,"ion-text",17),e.EFF(1," El sexo es requerido. "),e.k0s())}function N(o,a){1&o&&(e.j41(0,"ion-text",17),e.EFF(1," El rol es requerido. "),e.k0s())}const P=[{path:"",component:(()=>{var o;class a{constructor(t,r,s,d){var l;this.formBuilder=t,this.router=r,this.userService=s,this.alertController=d,this.userForm=this.formBuilder.group({nombre:["",i.k0.required],contrasena:["",[i.k0.required,i.k0.minLength(6)]],rol:["",i.k0.required],correo:["",[i.k0.required,i.k0.email]],fechaNacimiento:["",i.k0.required],sexo:["",i.k0.required]});const u=this.router.getCurrentNavigation();null!=u&&null!==(l=u.extras)&&void 0!==l&&null!==(l=l.state)&&void 0!==l&&l.user&&(this.usuario=u.extras.state.user)}ngOnInit(){this.usuario?this.userForm.patchValue({nombre:this.usuario.nombre,contrasena:this.usuario.contrasena,rol:this.usuario.rol,correo:this.usuario.correo,fechaNacimiento:this.usuario.fechaNacimiento,sexo:this.usuario.sexo}):console.error("No se encontraron datos de usuario en el estado de navegaci\xf3n")}saveChanges(){var t=this;return(0,p.A)(function*(){if(t.userForm.valid){var r;const l={id:null===(r=t.usuario)||void 0===r?void 0:r.id,...t.userForm.value};try{var s,d;yield t.userService.updateUsuarioSQLite(l),console.log(`Usuario con ID ${null===(s=t.usuario)||void 0===s?void 0:s.id} actualizado en SQLite`),navigator.onLine&&(yield t.userService.updateUsuarioAPI(l).toPromise(),console.log(`Usuario con ID ${null===(d=t.usuario)||void 0===d?void 0:d.id} actualizado en la API`)),yield(yield t.alertController.create({header:"\xc9xito",message:"Usuario actualizado correctamente.",buttons:["OK"]})).present(),t.router.navigate(["/usuarios/user-list"])}catch(u){console.error("Error al actualizar usuario:",u)}}else console.log("Formulario inv\xe1lido")})()}cancelChanges(){this.router.navigate(["/usuarios/user-list"])}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(i.ok),e.rXU(f.Ix),e.rXU(h.D),e.rXU(n.hG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-user-edit"]],decls:52,vars:8,consts:[[3,"formGroup"],["position","stacked"],["formControlName","nombre"],["color","danger",4,"ngIf"],["formControlName","correo","type","email"],["formControlName","contrasena","type","password"],["formControlName","fechaNacimiento","display-format","DD/MM/YYYY","picker-format","DD/MM/YYYY","presentation","date"],["formControlName","sexo"],["value","Hombre"],["value","Mujer"],["value","No Binario"],["formControlName","rol"],["value","usuario"],["value","administrador"],["value","empleado"],["expand","full",3,"click","disabled"],["expand","full","color","light",3,"click"],["color","danger"]],template:function(t,r){if(1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Editar Usuario"),e.k0s()()(),e.j41(4,"ion-content")(5,"form",0)(6,"ion-item")(7,"ion-label",1),e.EFF(8,"Nombre Completo"),e.k0s(),e.nrm(9,"ion-input",2),e.k0s(),e.DNE(10,k,2,0,"ion-text",3),e.j41(11,"ion-item")(12,"ion-label",1),e.EFF(13,"Correo Electr\xf3nico"),e.k0s(),e.nrm(14,"ion-input",4),e.k0s(),e.DNE(15,U,2,0,"ion-text",3),e.j41(16,"ion-item")(17,"ion-label",1),e.EFF(18,"Contrase\xf1a"),e.k0s(),e.nrm(19,"ion-input",5),e.k0s(),e.DNE(20,b,2,0,"ion-text",3),e.j41(21,"ion-item")(22,"ion-label",1),e.EFF(23,"Fecha de Nacimiento"),e.k0s(),e.nrm(24,"ion-datetime",6),e.k0s(),e.DNE(25,j,2,0,"ion-text",3),e.j41(26,"ion-item")(27,"ion-label",1),e.EFF(28,"Sexo"),e.k0s(),e.j41(29,"ion-select",7)(30,"ion-select-option",8),e.EFF(31,"Hombre"),e.k0s(),e.j41(32,"ion-select-option",9),e.EFF(33,"Mujer"),e.k0s(),e.j41(34,"ion-select-option",10),e.EFF(35,"No Binario"),e.k0s()()(),e.DNE(36,C,2,0,"ion-text",3),e.j41(37,"ion-item")(38,"ion-label",1),e.EFF(39,"Rol"),e.k0s(),e.j41(40,"ion-select",11)(41,"ion-select-option",12),e.EFF(42,"Usuario"),e.k0s(),e.j41(43,"ion-select-option",13),e.EFF(44,"Administrador"),e.k0s(),e.j41(45,"ion-select-option",14),e.EFF(46,"Empleado"),e.k0s()()(),e.DNE(47,N,2,0,"ion-text",3),e.j41(48,"ion-button",15),e.bIt("click",function(){return r.saveChanges()}),e.EFF(49,"Guardar Cambios"),e.k0s(),e.j41(50,"ion-button",16),e.bIt("click",function(){return r.cancelChanges()}),e.EFF(51,"Cancelar"),e.k0s()()()),2&t){let s,d,l,u,g,F;e.R7$(5),e.Y8G("formGroup",r.userForm),e.R7$(5),e.Y8G("ngIf",(null==(s=r.userForm.get("nombre"))?null:s.invalid)&&(null==(s=r.userForm.get("nombre"))?null:s.touched)),e.R7$(5),e.Y8G("ngIf",(null==(d=r.userForm.get("correo"))?null:d.invalid)&&(null==(d=r.userForm.get("correo"))?null:d.touched)),e.R7$(5),e.Y8G("ngIf",(null==(l=r.userForm.get("contrasena"))?null:l.invalid)&&(null==(l=r.userForm.get("contrasena"))?null:l.touched)),e.R7$(5),e.Y8G("ngIf",(null==(u=r.userForm.get("fechaNacimiento"))?null:u.invalid)&&(null==(u=r.userForm.get("fechaNacimiento"))?null:u.touched)),e.R7$(11),e.Y8G("ngIf",(null==(g=r.userForm.get("sexo"))?null:g.invalid)&&(null==(g=r.userForm.get("sexo"))?null:g.touched)),e.R7$(11),e.Y8G("ngIf",(null==(F=r.userForm.get("rol"))?null:F.invalid)&&(null==(F=r.userForm.get("rol"))?null:F.touched)),e.R7$(),e.Y8G("disabled",!r.userForm.valid)}},dependencies:[v.bT,i.qT,i.BC,i.cb,i.j4,i.JD,n.Jm,n.W9,n.A9,n.eU,n.$w,n.uz,n.he,n.Nm,n.Ip,n.IO,n.BC,n.ai,n.Je,n.Gw]}),a})()}];let x=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.iI.forChild(P),f.iI]}),a})(),I=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.MD,i.YN,i.X1,n.bv,x]}),a})()}}]);