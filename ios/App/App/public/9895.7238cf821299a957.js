"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9895],{9895:(w,f,c)=>{c.r(f),c.d(f,{LoginPageModule:()=>k});var p=c(177),a=c(9417),i=c(4742),h=c(9192),u=c(467),e=c(4438),b=c(1652);function v(t,l){1&t&&(e.j41(0,"ion-item",10)(1,"p",11),e.EFF(2,"Por favor, ingresa un correo electr\xf3nico v\xe1lido."),e.k0s()())}let P=(()=>{var t;class l{constructor(n,o,r,s,m,g){this.modalCtrl=n,this.formBuilder=o,this.alertController=r,this.animationCtrl=s,this.authService=m,this.loadingController=g,this.resetPasswordForm=this.formBuilder.group({email:["",[a.k0.required,a.k0.email]]})}ionViewWillEnter(){this.animateModalEntrance()}animateModalEntrance(){const n=document.querySelector(".modal-content");n&&this.animationCtrl.create().addElement(n).duration(400).easing("ease-out").fromTo("transform","translateY(100%)","translateY(0%)").fromTo("opacity",0,1).play()}dismissModal(){this.modalCtrl.dismiss()}recoverPassword(){var n=this;return(0,u.A)(function*(){var o;const r=null===(o=n.resetPasswordForm.get("email"))||void 0===o?void 0:o.value;if(r){const s=yield n.loadingController.create({message:"Enviando solicitud...",spinner:"crescent"});yield s.present(),n.authService.recoverPassword(r).subscribe(function(){var m=(0,u.A)(function*(g){yield s.dismiss(),g?(yield n.presentSuccessAlert(),n.dismissModal()):yield n.presentErrorAlert("No se encontr\xf3 ninguna cuenta con el correo ingresado.")});return function(g){return m.apply(this,arguments)}}(),function(){var m=(0,u.A)(function*(g){yield s.dismiss(),yield n.presentErrorAlert("Error al enviar solicitud de recuperaci\xf3n. Int\xe9ntelo nuevamente."),console.error("Error en recoverPassword:",g)});return function(g){return m.apply(this,arguments)}}())}else yield n.presentErrorAlert("Por favor, ingresa un correo electr\xf3nico v\xe1lido.")})()}presentSuccessAlert(){var n=this;return(0,u.A)(function*(){yield(yield n.alertController.create({header:"\xc9xito",message:"Se ha enviado un correo para restablecer la contrase\xf1a.",buttons:["OK"]})).present()})()}presentErrorAlert(n){var o=this;return(0,u.A)(function*(){yield(yield o.alertController.create({header:"Error",message:n,buttons:["OK"]})).present()})()}}return(t=l).\u0275fac=function(n){return new(n||t)(e.rXU(i.W3),e.rXU(a.ok),e.rXU(i.hG),e.rXU(i.Hx),e.rXU(b.Z),e.rXU(i.Xi))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-reset-password"]],decls:16,vars:3,consts:[[1,"modal-toolbar"],["slot","end"],["color","dark",3,"click"],[1,"ion-padding","modal-content"],[3,"ngSubmit","formGroup"],["lines","none",1,"input-item"],["position","floating",1,"input-label"],["formControlName","email","type","email"],["lines","none",4,"ngIf"],["expand","block","type","submit",1,"submit-button",3,"disabled"],["lines","none"],[1,"error"]],template:function(n,o){if(1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"Recuperar Contrase\xf1a"),e.k0s(),e.j41(4,"ion-buttons",1)(5,"ion-button",2),e.bIt("click",function(){return o.dismissModal()}),e.EFF(6,"Cerrar"),e.k0s()()()(),e.j41(7,"ion-content",3)(8,"form",4),e.bIt("ngSubmit",function(){return o.recoverPassword()}),e.j41(9,"ion-item",5)(10,"ion-label",6),e.EFF(11,"Correo Electr\xf3nico"),e.k0s(),e.nrm(12,"ion-input",7),e.k0s(),e.DNE(13,v,3,0,"ion-item",8),e.j41(14,"ion-button",9),e.EFF(15," Recuperar "),e.k0s()()()),2&n){let r;e.R7$(8),e.Y8G("formGroup",o.resetPasswordForm),e.R7$(5),e.Y8G("ngIf",(null==(r=o.resetPasswordForm.get("email"))?null:r.invalid)&&(null==(r=o.resetPasswordForm.get("email"))?null:r.touched)),e.R7$(),e.Y8G("disabled",o.resetPasswordForm.invalid)}},dependencies:[p.bT,a.qT,a.BC,a.cb,a.j4,a.JD,i.Jm,i.QW,i.W9,i.eU,i.$w,i.uz,i.he,i.BC,i.ai,i.Gw],styles:['@charset "UTF-8";ion-header[_ngcontent-%COMP%]{--background: #f1e4ff;border-radius:12px 12px 0 0;box-shadow:0 4px 10px #00000026}.modal-toolbar[_ngcontent-%COMP%]{--background: transparent;--color: #5a4b8e;font-family:Arial,sans-serif;text-align:center}ion-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#5a4b8e}.modal-content[_ngcontent-%COMP%]{background-color:#f7f3fc;border-radius:0 0 12px 12px;padding:20px}.input-item[_ngcontent-%COMP%]{--background: transparent;--highlight-color-focused: #8e7cc3;--highlight-color-valid: #8e7cc3;--color: #5a4b8e;margin-top:20px}.input-label[_ngcontent-%COMP%]{color:#8e7cc3;font-family:Arial,sans-serif;font-size:1rem}.submit-button[_ngcontent-%COMP%]{--background: #a084ca;--color: #ffffff;font-size:1rem;font-weight:600;border-radius:25px;height:45px;box-shadow:0 4px 10px #0003;margin-top:25px;text-transform:uppercase}.submit-button[_ngcontent-%COMP%]:hover{--background: #8c72b1}.error[_ngcontent-%COMP%]{color:#d9534f;font-size:.8rem;margin-top:5px;padding-left:5px}']}),l})();var C=c(2872);function F(t,l){1&t&&(e.j41(0,"ion-item")(1,"p",17),e.EFF(2,"Por favor, ingresa un correo electr\xf3nico v\xe1lido."),e.k0s()())}function x(t,l){1&t&&(e.j41(0,"ion-item")(1,"p",17),e.EFF(2,"La contrase\xf1a debe tener al menos 8 caracteres, incluir una letra may\xfascula y un n\xfamero."),e.k0s()())}const _=[{path:"",component:(()=>{var t;class l{constructor(n,o,r,s,m){this.navCtrl=n,this.formBuilder=o,this.modalController=r,this.autenticacionService=s,this.animationCtrl=m,this.loginForm=this.formBuilder.group({email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required,a.k0.minLength(8),a.k0.pattern("^(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[A-Z]).{8,}$")]]})}ngAfterViewInit(){this.applyAnimations()}applyAnimations(){const n=document.querySelector(".login-card");n&&this.animationCtrl.create().addElement(n).duration(1e3).fromTo("opacity","0","1").fromTo("transform","translateY(50px)","translateY(0px)").play();const o=document.querySelector(".login-button");o&&this.animationCtrl.create().addElement(o).duration(800).fromTo("transform","scale(0.8)","scale(1)").fromTo("opacity","0","1").play()}login(){if(this.loginForm.valid){const{email:n,password:o}=this.loginForm.value;this.autenticacionService.login(n,o).then(r=>{if(r){const s=localStorage.getItem("userName")||"Usuario";this.navCtrl.navigateForward("/home",{state:{nombreUsuario:s}}),this.loginForm.reset()}else alert("Credenciales incorrectas. Int\xe9ntalo de nuevo.")}).catch(r=>{console.error("Error al iniciar sesi\xf3n:",r),alert("Error al iniciar sesi\xf3n. Por favor, int\xe9ntalo m\xe1s tarde.")})}else alert("Por favor, revisa los datos ingresados.")}presentResetPasswordModal(n){var o=this;return(0,u.A)(function*(){return n.preventDefault(),yield(yield o.modalController.create({component:P})).present()})()}navigateToHome(){this.navCtrl.navigateForward("/home")}navigateToRegister(n){n.preventDefault(),this.navCtrl.navigateForward("/registro")}}return(t=l).\u0275fac=function(n){return new(n||t)(e.rXU(C.q9),e.rXU(a.ok),e.rXU(i.W3),e.rXU(b.Z),e.rXU(i.Hx))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:34,vars:4,consts:[["fullscreen","",1,"login-content"],[1,"background-container"],["src","assets/images/fondo1.jpeg","alt","Fondo",1,"background-image"],[1,"content-overlay"],["src","assets/images/logo_pawsy.png","alt","Logo",1,"logo"],[1,"login-card"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","email","type","email"],[4,"ngIf"],["formControlName","password","type","password"],["expand","block","type","submit",1,"login-button",3,"disabled"],[1,"forgot-password"],["href","#",3,"click"],[1,"register-link"],[1,"go-home-link"],[3,"click"],[1,"error"]],template:function(n,o){if(1&n&&(e.j41(0,"ion-content",0)(1,"div",1),e.nrm(2,"img",2),e.k0s(),e.j41(3,"div",3),e.nrm(4,"img",4),e.j41(5,"ion-card",5)(6,"ion-card-header")(7,"ion-card-title"),e.EFF(8,"Iniciar Sesi\xf3n"),e.k0s()(),e.j41(9,"ion-card-content")(10,"form",6),e.bIt("ngSubmit",function(){return o.login()}),e.j41(11,"ion-item")(12,"ion-label",7),e.EFF(13,"Correo Electr\xf3nico"),e.k0s(),e.nrm(14,"ion-input",8),e.k0s(),e.DNE(15,F,3,0,"ion-item",9),e.j41(16,"ion-item")(17,"ion-label",7),e.EFF(18,"Contrase\xf1a"),e.k0s(),e.nrm(19,"ion-input",10),e.k0s(),e.DNE(20,x,3,0,"ion-item",9),e.j41(21,"ion-button",11),e.EFF(22," Iniciar "),e.k0s(),e.j41(23,"div",12)(24,"a",13),e.bIt("click",function(s){return o.presentResetPasswordModal(s)}),e.EFF(25,"\xbfOlvidaste tu contrase\xf1a?"),e.k0s()(),e.j41(26,"div",14)(27,"p"),e.EFF(28,"\xbfNo tienes una cuenta? "),e.j41(29,"a",13),e.bIt("click",function(s){return o.navigateToRegister(s)}),e.EFF(30,"Reg\xedstrate aqu\xed"),e.k0s()()(),e.j41(31,"div",15)(32,"ion-item",16),e.bIt("click",function(){return o.navigateToHome()}),e.EFF(33,"Ir al home"),e.k0s()()()()()()()),2&n){let r,s;e.R7$(10),e.Y8G("formGroup",o.loginForm),e.R7$(5),e.Y8G("ngIf",(null==(r=o.loginForm.get("email"))?null:r.invalid)&&(null==(r=o.loginForm.get("email"))?null:r.touched)),e.R7$(5),e.Y8G("ngIf",(null==(s=o.loginForm.get("password"))?null:s.invalid)&&(null==(s=o.loginForm.get("password"))?null:s.touched)),e.R7$(),e.Y8G("disabled",o.loginForm.invalid)}},dependencies:[p.bT,a.qT,a.BC,a.cb,a.j4,a.JD,i.Jm,i.b_,i.I9,i.ME,i.tN,i.W9,i.$w,i.uz,i.he,i.Gw],styles:['@charset "UTF-8";.login-content[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;text-align:center;color:#fff;height:100%;z-index:1}.background-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden}.background-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:brightness(.8)}.content-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;height:100%;z-index:1}.logo[_ngcontent-%COMP%]{width:120px;margin-bottom:20px;filter:drop-shadow(0px 4px 4px rgba(0,0,0,.25));z-index:2}.login-card[_ngcontent-%COMP%]{width:90%;background:#ffffffd9;border-radius:20px;box-shadow:0 4px 15px #0003;padding:20px;z-index:2}ion-card-title[_ngcontent-%COMP%]{font-size:1.6rem;color:#a084ca;font-family:"Cursive",sans-serif;text-align:center;margin-bottom:10px}ion-item[_ngcontent-%COMP%]{--background: transparent;--highlight-color-focused: #a084ca;--highlight-color-valid: #a084ca;border-radius:10px;margin-bottom:15px;--padding-start: 0px;--padding-end: 0px;--color: #6a1b9a;--color-focused: #8e24aa;--color-valid: #8e24aa}ion-input[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0px;--padding-end: 0px;font-size:1.2rem;color:#4a4a4a;border:none;box-shadow:none}.error[_ngcontent-%COMP%]{color:red;font-size:.8rem;margin-left:10px}.login-button[_ngcontent-%COMP%]{width:100%;border-radius:50px;--background: #a084ca;--color: white;font-size:1.2rem;margin-top:20px;box-shadow:0 4px 6px #0003}.forgot-password[_ngcontent-%COMP%]{margin-top:10px;text-align:center;z-index:2}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a084ca;text-decoration:none;font-size:.9rem}.register-link[_ngcontent-%COMP%]{margin-top:20px;text-align:center;font-size:.9rem;color:#4a4a4a;z-index:2}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a084ca;text-decoration:none;font-weight:700;z-index:2}']}),l})()}];let y=(()=>{var t;class l{}return(t=l).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.iI.forChild(_),h.iI]}),l})(),k=(()=>{var t;class l{}return(t=l).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.MD,a.YN,a.X1,i.bv,y]}),l})()}}]);