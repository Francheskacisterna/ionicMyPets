"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3297],{3297:(N,h,d)=>{d.r(h),d.d(h,{UserAddPageModule:()=>D});var v=d(177),a=d(9417),i=d(4742),F=d(9192),b=d(467),k=d(6598),e=d(4438),U=d(9626);function A(r,s){1&r&&(e.j41(0,"ion-text",26),e.EFF(1," El nombre debe tener al menos 6 caracteres. "),e.k0s())}function E(r,s){1&r&&(e.j41(0,"ion-text",26),e.EFF(1," Correo electr\xf3nico inv\xe1lido. "),e.k0s())}function y(r,s){1&r&&(e.j41(0,"ion-text",26),e.EFF(1," La contrase\xf1a es requerida y debe tener al menos 6 caracteres. "),e.k0s())}function P(r,s){1&r&&(e.j41(0,"ion-text",26),e.EFF(1," Las contrase\xf1as no coinciden. "),e.k0s())}function _(r,s){1&r&&(e.j41(0,"ion-text",26),e.EFF(1," Debes tener al menos 18 a\xf1os para registrarte. "),e.k0s())}function j(r,s){1&r&&(e.j41(0,"ion-text",26),e.EFF(1," El sexo es requerido. "),e.k0s())}function C(r,s){1&r&&(e.j41(0,"ion-text",26),e.EFF(1," El rol es requerido. "),e.k0s())}const x=[{path:"",component:(()=>{var r;class s{constructor(t,o,n,u){this.formBuilder=t,this.userService=o,this.router=n,this.alertController=u,this.userForm=this.formBuilder.group({nombre:["",[a.k0.required,a.k0.minLength(6)]],contrasena:["",[a.k0.required,a.k0.minLength(6)]],confirmarContrasena:["",a.k0.required],rol:["",a.k0.required],correo:["",[a.k0.required,a.k0.email]],fechaNacimiento:["",[a.k0.required,this.ageValidator]],sexo:["",a.k0.required]},{validators:this.passwordMatchValidator});const l=new Date;this.today=l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0")}passwordMatchValidator(t){var o,n;return(null===(o=t.get("contrasena"))||void 0===o?void 0:o.value)===(null===(n=t.get("confirmarContrasena"))||void 0===n?void 0:n.value)?null:{passwordMismatch:!0}}ageValidator(t){const o=new Date(t.value),n=new Date,u=n.getFullYear()-o.getFullYear(),l=n.getMonth()-o.getMonth(),g=n.getDate()-o.getDate();return(l>0||0===l&&g>=0?u:u-1)>=18?null:{ageInvalid:!0}}addUser(){var t=this;return(0,b.A)(function*(){if(t.userForm.valid){const o={...t.userForm.value,id:void 0,synced:0};try{(yield k.l.getStatus()).connected?(yield t.userService.addUsuario(o),console.log("Usuario a\xf1adido y sincronizado con \xe9xito a la API.")):(yield t.userService.addUsuarioSQLite(o),console.log("Usuario a\xf1adido localmente en SQLite (sin sincronizaci\xf3n).")),yield t.showAlert("\xc9xito","Usuario a\xf1adido correctamente."),t.resetForm(),t.router.navigate(["/usuarios/user-list"])}catch(n){console.error("Error al agregar el usuario:",n),yield t.showAlert("Error","Hubo un problema al a\xf1adir el usuario.")}}else console.log("Formulario inv\xe1lido"),yield t.showAlert("Formulario inv\xe1lido","Por favor, completa todos los campos correctamente.")})()}resetForm(){this.userForm.reset({nombre:"",contrasena:"",rol:"",correo:"",fechaNacimiento:(new Date).toISOString(),sexo:""})}showAlert(t,o){var n=this;return(0,b.A)(function*(){yield(yield n.alertController.create({header:t,message:o,buttons:["OK"]})).present()})()}goToUserAll(){this.router.navigate(["/usuarios/user-list"])}}return(r=s).\u0275fac=function(t){return new(t||r)(e.rXU(a.ok),e.rXU(U.D),e.rXU(F.Ix),e.rXU(i.hG))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-user-add"]],decls:62,vars:10,consts:[["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","list"],[1,"ion-padding","user-add-content"],[3,"ngSubmit","formGroup"],[1,"styled-input"],["position","floating"],["formControlName","nombre","type","text","required",""],["color","danger",4,"ngIf"],["formControlName","correo","type","email","required",""],["formControlName","contrasena","type","password","required",""],["formControlName","confirmarContrasena","type","password","required",""],["formControlName","fechaNacimiento","display-format","DD/MM/YYYY","presentation","date",3,"value"],["formControlName","sexo","placeholder","Selecciona Sexo","required",""],["value","Hombre"],["value","Mujer"],["value","No Binario"],["formControlName","rol","placeholder","Selecciona Rol","required",""],["value","administrador"],["value","empleado"],["value","usuario"],["expand","full","type","submit","color","success",1,"login-button",3,"disabled"],["slot","start","name","person-add"],["expand","full","color","tertiary",3,"click"],["slot","start","name","arrow-back"],["color","danger"]],template:function(t,o){if(1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e.EFF(3,"Agregar Usuario"),e.k0s(),e.j41(4,"ion-buttons",1)(5,"ion-button",2),e.bIt("click",function(){return o.goToUserAll()}),e.nrm(6,"ion-icon",3),e.k0s()()()(),e.j41(7,"ion-content",4)(8,"form",5),e.bIt("ngSubmit",function(){return o.addUser()}),e.j41(9,"ion-item",6)(10,"ion-label",7),e.EFF(11,"Nombre Completo"),e.k0s(),e.nrm(12,"ion-input",8),e.k0s(),e.DNE(13,A,2,0,"ion-text",9),e.j41(14,"ion-item",6)(15,"ion-label",7),e.EFF(16,"Correo Electr\xf3nico"),e.k0s(),e.nrm(17,"ion-input",10),e.k0s(),e.DNE(18,E,2,0,"ion-text",9),e.j41(19,"ion-item",6)(20,"ion-label",7),e.EFF(21,"Contrase\xf1a"),e.k0s(),e.nrm(22,"ion-input",11),e.k0s(),e.DNE(23,y,2,0,"ion-text",9),e.j41(24,"ion-item",6)(25,"ion-label",7),e.EFF(26,"Confirmar Contrase\xf1a"),e.k0s(),e.nrm(27,"ion-input",12),e.k0s(),e.DNE(28,P,2,0,"ion-text",9),e.j41(29,"ion-item",6)(30,"ion-label"),e.EFF(31,"Fecha de Nacimiento"),e.k0s(),e.nrm(32,"ion-datetime",13),e.k0s(),e.DNE(33,_,2,0,"ion-text",9),e.j41(34,"ion-item",6)(35,"ion-label"),e.EFF(36,"Sexo"),e.k0s(),e.j41(37,"ion-select",14)(38,"ion-select-option",15),e.EFF(39,"Hombre"),e.k0s(),e.j41(40,"ion-select-option",16),e.EFF(41,"Mujer"),e.k0s(),e.j41(42,"ion-select-option",17),e.EFF(43,"No Binario"),e.k0s()()(),e.DNE(44,j,2,0,"ion-text",9),e.j41(45,"ion-item",6)(46,"ion-label"),e.EFF(47,"Rol"),e.k0s(),e.j41(48,"ion-select",18)(49,"ion-select-option",19),e.EFF(50,"Administrador"),e.k0s(),e.j41(51,"ion-select-option",20),e.EFF(52,"Empleado"),e.k0s(),e.j41(53,"ion-select-option",21),e.EFF(54,"Usuario"),e.k0s()()(),e.DNE(55,C,2,0,"ion-text",9),e.j41(56,"ion-button",22),e.nrm(57,"ion-icon",23),e.EFF(58," Agregar Usuario "),e.k0s()(),e.j41(59,"ion-button",24),e.bIt("click",function(){return o.goToUserAll()}),e.nrm(60,"ion-icon",25),e.EFF(61," Volver "),e.k0s()()),2&t){let n,u,l,g,m,f,p;e.R7$(8),e.Y8G("formGroup",o.userForm),e.R7$(5),e.Y8G("ngIf",(null==(n=o.userForm.get("nombre"))?null:n.invalid)&&(null==(n=o.userForm.get("nombre"))?null:n.touched)),e.R7$(5),e.Y8G("ngIf",(null==(u=o.userForm.get("correo"))?null:u.invalid)&&(null==(u=o.userForm.get("correo"))?null:u.touched)),e.R7$(5),e.Y8G("ngIf",(null==(l=o.userForm.get("contrasena"))?null:l.invalid)&&(null==(l=o.userForm.get("contrasena"))?null:l.touched)),e.R7$(5),e.Y8G("ngIf",o.userForm.hasError("passwordMismatch")&&(null==(g=o.userForm.get("confirmarContrasena"))?null:g.touched)),e.R7$(4),e.Y8G("value",o.today),e.R7$(),e.Y8G("ngIf",(null==(m=o.userForm.get("fechaNacimiento"))?null:m.hasError("ageInvalid"))&&(null==(m=o.userForm.get("fechaNacimiento"))?null:m.touched)),e.R7$(11),e.Y8G("ngIf",(null==(f=o.userForm.get("sexo"))?null:f.invalid)&&(null==(f=o.userForm.get("sexo"))?null:f.touched)),e.R7$(11),e.Y8G("ngIf",(null==(p=o.userForm.get("rol"))?null:p.invalid)&&(null==(p=o.userForm.get("rol"))?null:p.touched)),e.R7$(),e.Y8G("disabled",!o.userForm.valid)}},dependencies:[v.bT,a.qT,a.BC,a.cb,a.YS,a.j4,a.JD,i.Jm,i.QW,i.W9,i.A9,i.eU,i.iq,i.$w,i.uz,i.he,i.Nm,i.Ip,i.IO,i.BC,i.ai,i.Je,i.Gw],styles:[".user-add-content[_ngcontent-%COMP%]{--background: #f4f4f4}.styled-input[_ngcontent-%COMP%]{--padding-start: 15px;--border-radius: 8px;--background: #ffffff;margin-bottom:15px}ion-button[_ngcontent-%COMP%]{margin-top:20px}ion-toolbar[_ngcontent-%COMP%]{--background: #3880ff;--color: white}ion-button[color=success][_ngcontent-%COMP%]{--background: #28a745;--border-radius: 8px}ion-button[color=tertiary][_ngcontent-%COMP%]{--background: #6c757d;--border-radius: 8px}"]}),s})()}];let M=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[F.iI.forChild(x),F.iI]}),s})(),D=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[v.MD,a.YN,a.X1,i.bv,M]}),s})()}}]);